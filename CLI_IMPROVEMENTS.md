# necrocode.cli æ”¹å–„ææ¡ˆ

## ç¾çŠ¶ã®èª²é¡Œ

### 1. **planã‚³ãƒãƒ³ãƒ‰ã®åˆ¶é™**
- âŒ ã‚µãƒ³ãƒ—ãƒ«ã‚¿ã‚¹ã‚¯ã—ã‹ç”Ÿæˆã§ããªã„
- âŒ LLMçµ±åˆãŒãªã„
- âŒ ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•æ¨è«–ãŒã§ããªã„

### 2. **å®Ÿè¡Œæ™‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ä¸è¶³**
- âŒ é€²æ—çŠ¶æ³ãŒã‚ã‹ã‚Šã«ãã„
- âŒ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãŒãªã„
- âŒ ã‚¨ãƒ©ãƒ¼æ™‚ã®è©³ç´°ãŒä¸è¶³

### 3. **statusã‚³ãƒãƒ³ãƒ‰ãŒæœªå®Ÿè£…**
- âŒ å®Ÿè¡ŒçŠ¶æ³ã‚’ç¢ºèªã§ããªã„
- âŒ å®Œäº†ç‡ãŒã‚ã‹ã‚‰ãªã„

### 4. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¼±ã„**
- âŒ ã‚¿ã‚¹ã‚¯å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤ãŒãªã„
- âŒ ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒä¿å­˜ã•ã‚Œãªã„
- âŒ ãƒªã‚«ãƒãƒªãƒ¼æ‰‹é †ãŒãªã„

### 5. **è¨­å®šç®¡ç†ãŒãªã„**
- âŒ æ¯å›ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- âŒ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã®è¨­å®šãŒã§ããªã„

## æ”¹å–„ææ¡ˆï¼ˆå„ªå…ˆåº¦é †ï¼‰

### ğŸ”¥ é«˜å„ªå…ˆåº¦

#### 1. LLMãƒ™ãƒ¼ã‚¹ã®Task Planner
```bash
# ç¾åœ¨ï¼ˆã‚µãƒ³ãƒ—ãƒ«ã®ã¿ï¼‰
necrocode plan "ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚’ä½œæˆ" --project chat-app

# æ”¹å–„å¾Œï¼ˆLLMã§è‡ªå‹•ç”Ÿæˆï¼‰
necrocode plan "èªè¨¼æ©Ÿèƒ½ä»˜ãã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚’ä½œæˆ" --project chat-app
# â†’ LLMãŒè‡ªå‹•çš„ã«5-10å€‹ã®ã‚¿ã‚¹ã‚¯ã«åˆ†è§£
# â†’ ä¾å­˜é–¢ä¿‚ã‚’æ¨è«–
# â†’ tasks.jsonã‚’ç”Ÿæˆ
```

**å®Ÿè£…**:
```python
# necrocode/task_planner.py
from strandsagents import Agent

class TaskPlanner:
    def plan(self, job_description: str) -> List[Task]:
        agent = Agent("task-planner")
        prompt = f"""
        ä»¥ä¸‹ã®ã‚¸ãƒ§ãƒ–è¨˜è¿°ã‚’ã€å®Ÿè£…å¯èƒ½ãªã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã—ã¦ãã ã•ã„:
        {job_description}
        
        å„ã‚¿ã‚¹ã‚¯ã«ã¯ä»¥ä¸‹ã‚’å«ã‚ã¦ãã ã•ã„:
        - ã‚¿ã‚¤ãƒˆãƒ«
        - è©³ç´°ãªèª¬æ˜
        - ä¾å­˜é–¢ä¿‚
        - ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
        - å—ã‘å…¥ã‚ŒåŸºæº–
        """
        return agent.execute(prompt)
```

#### 2. é€²æ—è¡¨ç¤ºã®æ”¹å–„
```bash
# ç¾åœ¨
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ 'chat-app' ã‚’å®Ÿè¡Œä¸­...
[Task 1] Worktreeã‚’ä½œæˆä¸­...

# æ”¹å–„å¾Œï¼ˆrichãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: chat-app                  â”‚
â”‚ é€²æ—: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40% (2/5)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Task 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ (2.3s)  â”‚
â”‚ âœ“ Task 2: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£… (5.1s)      â”‚
â”‚ âš™ Task 3: èªè¨¼APIå®Ÿè£… (å®Ÿè¡Œä¸­...)      â”‚
â”‚ â³ Task 4: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸APIå®Ÿè£… (å¾…æ©Ÿä¸­)   â”‚
â”‚ â³ Task 5: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… (å¾…æ©Ÿä¸­)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. statusã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè£…
```bash
necrocode status --project chat-app

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: chat-app
çŠ¶æ…‹: å®Ÿè¡Œä¸­
é€²æ—: 40% (2/5ã‚¿ã‚¹ã‚¯å®Œäº†)
é–‹å§‹æ™‚åˆ»: 2025-12-07 20:00:00
çµŒéæ™‚é–“: 7åˆ†34ç§’

ã‚¿ã‚¹ã‚¯çŠ¶æ³:
  âœ“ Task 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ (å®Œäº† - 2.3s)
  âœ“ Task 2: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£… (å®Œäº† - 5.1s)
  âš™ Task 3: èªè¨¼APIå®Ÿè£… (å®Ÿè¡Œä¸­ - 2åˆ†10ç§’)
  â³ Task 4: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸APIå®Ÿè£… (å¾…æ©Ÿä¸­)
  â³ Task 5: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… (å¾…æ©Ÿä¸­)
```

### âš¡ ä¸­å„ªå…ˆåº¦

#### 4. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰
```bash
necrocode execute chat-app --interactive

? å®Ÿè¡Œã™ã‚‹ã‚¿ã‚¹ã‚¯ã‚’é¸æŠã—ã¦ãã ã•ã„:
  [x] Task 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
  [x] Task 2: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£…
  [ ] Task 3: èªè¨¼APIå®Ÿè£…
  [x] Task 4: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸APIå®Ÿè£…
  [ ] Task 5: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

? ä¸¦åˆ—ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°: 3
? Kiroãƒ¢ãƒ¼ãƒ‰: manual

å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ (y/n): y
```

#### 5. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªãƒˆãƒ©ã‚¤
```bash
# ã‚¿ã‚¹ã‚¯å¤±æ•—æ™‚
âœ— Task 3 failed: ModuleNotFoundError: No module named 'jwt'

ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°: .kiro/logs/task-3-error.log
ãƒªãƒˆãƒ©ã‚¤ã—ã¾ã™ã‹ï¼Ÿ (y/n): y

# è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã‚ªãƒ—ã‚·ãƒ§ãƒ³
necrocode execute chat-app --retry 3 --retry-delay 10
```

#### 6. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µãƒãƒ¼ãƒˆ
```yaml
# .necrocode.yaml
default:
  workers: 3
  mode: manual
  worktree_dir: worktrees
  auto_pr: false

projects:
  chat-app:
    workers: 5
    mode: auto
    reviewers:
      - user1
      - user2
```

### ğŸ¯ ä½å„ªå…ˆåº¦ï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

#### 7. GitHub PRè‡ªå‹•ä½œæˆ
```bash
necrocode execute chat-app --auto-pr --reviewers user1,user2

âœ“ Task 1 completed
  â†’ PR #123 created: https://github.com/user/repo/pull/123
  â†’ Reviewers assigned: user1, user2
  â†’ Labels: enhancement, task-1
```

#### 8. ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ‰
```bash
necrocode execute chat-app --dry-run

å®Ÿè¡Œè¨ˆç”»:
  Phase 1 (ä¸¦åˆ—):
    - Task 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
  
  Phase 2 (ä¸¦åˆ—):
    - Task 2: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£…
  
  Phase 3 (ä¸¦åˆ—):
    - Task 3: èªè¨¼APIå®Ÿè£…
    - Task 4: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸APIå®Ÿè£…
  
  Phase 4:
    - Task 5: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

æ¨å®šå®Ÿè¡Œæ™‚é–“: 15-20åˆ†
```

#### 9. ãƒ­ã‚°ã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹
```bash
necrocode metrics --project chat-app

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: chat-app
å®Ÿè¡Œå›æ•°: 3å›
å¹³å‡å®Ÿè¡Œæ™‚é–“: 18åˆ†32ç§’
æˆåŠŸç‡: 100%

ã‚¿ã‚¹ã‚¯åˆ¥çµ±è¨ˆ:
  Task 1: å¹³å‡ 2.1s (æˆåŠŸç‡: 100%)
  Task 2: å¹³å‡ 5.3s (æˆåŠŸç‡: 100%)
  Task 3: å¹³å‡ 8.7s (æˆåŠŸç‡: 66%)
  Task 4: å¹³å‡ 6.2s (æˆåŠŸç‡: 100%)
  Task 5: å¹³å‡ 12.1s (æˆåŠŸç‡: 100%)
```

#### 10. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½
```bash
# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ä½œæˆ
necrocode new --template web-app my-app

# ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä¿å­˜
necrocode template save chat-app --name my-chat-template

# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§
necrocode template list
  - web-app (çµ„ã¿è¾¼ã¿)
  - api (çµ„ã¿è¾¼ã¿)
  - cli (çµ„ã¿è¾¼ã¿)
  - my-chat-template (ã‚«ã‚¹ã‚¿ãƒ )
```

## å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: åŸºæœ¬æ©Ÿèƒ½ã®å¼·åŒ–ï¼ˆ1-2é€±é–“ï¼‰
- [x] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã®æ•´ç†
- [ ] LLMãƒ™ãƒ¼ã‚¹ã®Task Planner
- [ ] é€²æ—è¡¨ç¤ºã®æ”¹å–„
- [ ] statusã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè£…

### Phase 2: UXæ”¹å–„ï¼ˆ1é€±é–“ï¼‰
- [ ] ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªãƒˆãƒ©ã‚¤
- [ ] è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µãƒãƒ¼ãƒˆ

### Phase 3: è‡ªå‹•åŒ–ã¨çµ±åˆï¼ˆ1-2é€±é–“ï¼‰
- [ ] GitHub PRè‡ªå‹•ä½œæˆ
- [ ] ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ‰
- [ ] ãƒ­ã‚°ã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹

### Phase 4: æ‹¡å¼µæ©Ÿèƒ½ï¼ˆç¶™ç¶šçš„ï¼‰
- [ ] ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
- [ ] Web UI

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª
```bash
pip install rich          # TUI/é€²æ—è¡¨ç¤º
pip install pyyaml        # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
pip install pygithub      # GitHub API
pip install inquirer      # ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
```

### æ—¢å­˜ã®çµ±åˆ
- âœ… strandsagents - LLMçµ±åˆ
- âœ… click - CLIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- âœ… task_registry - ã‚¿ã‚¹ã‚¯ç®¡ç†

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **Phase 1ã®å®Ÿè£…ã‚’é–‹å§‹**
   ```bash
   necrocode execute cli-improvements --workers 2 --mode manual
   ```

2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’åé›†**
   - å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã¦æ”¹å–„ç‚¹ã‚’ç‰¹å®š
   - å„ªå…ˆåº¦ã‚’èª¿æ•´

3. **æ®µéšçš„ã«ãƒªãƒªãƒ¼ã‚¹**
   - å„Phaseã”ã¨ã«ãƒªãƒªãƒ¼ã‚¹
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°

## å‚è€ƒ

- [Click Documentation](https://click.palletsprojects.com/)
- [Rich Documentation](https://rich.readthedocs.io/)
- [PyGithub Documentation](https://pygithub.readthedocs.io/)
